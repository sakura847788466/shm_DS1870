webpackJsonp([13],{"/DPI":function(t,n){var e=/^[0-9A-Za-z_@-]*$/,r=void 0;function i(){return void 0===r&&(r=window.localStorage),!0}function o(t){return"string"==typeof t&&e.test(t)}n={set:function(t,n){var e=!1;if(o(t)&&i())try{n+="",r.setItem(t,n),e=!0}catch(t){}return e},get:function(t){if(o(t)&&i())try{return r.getItem(t)}catch(t){}return null},remove:function(t){if(o(t)&&i())try{return r.removeItem(t),!0}catch(t){}return!1},clear:function(){if(i())try{for(var t in r)r.removeItem(t);return!0}catch(t){}return!1}},t.exports=n},"5stj":function(t,n){},"8bPw":function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("lRwf"),i=e.n(r),o=e("mvHQ"),a=e.n(o),c=e("Dd8w"),u=e.n(c),s=e("SJI6"),l=e.n(s),p=e("yPgl"),f=e("/DPI"),d=e.n(f),v=e("vPHJ"),h={name:"UpdateServer",mounted:function(){var t=d.a.get("server");if(t)if(t=JSON.parse(t),this.isShowClose=!0,"ip"==t.type){var n=t.http.split(":");this.initIp=n[0],this.port=n[1]}else this.url=t.http},data:function(){return{dialogFormVisible:!0,initIp:"",port:"",url:"",isShowClose:!1,type:"ip"}},methods:{inputValidator:function(t){var n={};if("ip"==this.type){var e=this.initIp,r=this.port;e=e.trim(),r=r.trim(),n.type="ip";var i=Object(v.h)(e),o=Object(v.j)(r);if(i)return void this.$message({type:"error",message:i,duration:3e3,showClose:!0});if(o)return void this.$message({type:"error",message:o,duration:3e3,showClose:!0});n.http=e+":"+r,d.a.set("server",a()(n)),d.a.set("isShowUpdateServer",Date.now()),this.dialogFormVisible=!1,window.location.reload()}else if("url"==this.type){n.type="url";var c=this.url;c=c.trim();var u=Object(v.k)(c);if(u)return void this.$message({type:"error",message:u,duration:3e3,showClose:!0});n.http=c,d.a.set("server",a()(n)),d.a.set("isShowUpdateServer",Date.now()),this.dialogFormVisible=!1,window.location.reload()}}},props:{active:String,close:Function}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-dialog",{attrs:{title:"请求服务设置","close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.dialogFormVisible,"show-close":!1,width:"500px"},on:{"update:visible":function(n){t.dialogFormVisible=n}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.inputValidator(t.active)}}},[e("el-tabs",{attrs:{type:"card"},model:{value:t.type,callback:function(n){t.type=n},expression:"type"}},[e("el-tab-pane",{attrs:{label:"IP设置",name:"ip"}},[e("div",{staticClass:"ip-alert"},[e("span",{staticClass:"ip-alert-tip"},[t._v("IP:")]),t._v(" "),e("el-input",{model:{value:t.initIp,callback:function(n){t.initIp=n},expression:"initIp"}})],1),t._v(" "),e("div",{staticClass:"ip-alert"},[e("span",{staticClass:"ip-alert-tip"},[t._v("端口:")]),t._v(" "),e("el-input",{model:{value:t.port,callback:function(n){t.port=n},expression:"port"}})],1)]),t._v(" "),e("el-tab-pane",{attrs:{label:"域名设置",name:"url"}},[e("div",{staticClass:"ip-alert"},[e("span",{staticClass:"ip-alert-tip"},[t._v("网址:")]),t._v(" "),e("el-input",{model:{value:t.url,callback:function(n){t.url=n},expression:"url"}})],1)])],1),t._v(" "),e("div",[e("h2",{staticClass:"p1"},[t._v("示例提示和服务说明")]),t._v(" "),e("h3",{staticClass:"p1"},[t._v("示例：")]),t._v(" "),e("p",[t._v("假如服务部署在203.195.138.133 服务端口号为 30003\n      域名为 http://opentest.cn\n      如选择ip设置则可选上面的服务ip和端口号,若选域名则可对于的域名即可。")]),t._v(" "),e("h3",{staticClass:"p1"},[t._v("说明：")]),t._v(" "),e("p",[t._v("1.IP不用加http://，该IP不是当前的电脑的ip地址而是服务部署的地址")]),t._v(" "),e("p",[t._v("IP：203.195.138.133 端口号：40003")]),t._v(" "),e("p",[t._v("2.域名：")]),t._v(" "),e("p",[t._v("http://www.baidu.com")]),t._v(" "),e("p",[t._v("https://www.baidu.com")])]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowClose,expression:"isShowClose"}],on:{click:t.close}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.inputValidator(t.active)}}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var g=e("VU/8")(h,m,!1,function(t){e("8bPw")},"data-v-28528854",null).exports,b={name:"Header",mounted:function(){},data:function(){return{isShowUpdatServer:!1,active:""}},methods:{goTo:function(t){this.$router.replace(t)},isCurrent:function(t){return this.$route.path===t},updateIP:function(){var t=JSON.parse(d.a.get("server"));this.isShowUpdatServer=!0,"ip"==t.type?this.active="ip":this.active="url"},close:function(){this.isShowUpdatServer=!1}},components:{UpdateServer:g}},w={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("header",[e("div",{staticClass:"nav max"},[e("li",{class:{in:t.isCurrent("/")},on:{click:function(n){return t.goTo("/")}}},[e("span",[t._v("白名单")])]),t._v(" "),e("li",{class:{in:t.isCurrent("/deviceState")},on:{click:function(n){return t.goTo("/deviceState")}}},[e("span",[t._v("设备状态")])]),t._v(" "),e("li",{class:{in:t.isCurrent("/aquipmentConfig")},on:{click:function(n){return t.goTo("/aquipmentConfig")}}},[e("span",[t._v("设备配置信息")])]),t._v(" "),e("li",{class:{in:t.isCurrent("/printRecord")},on:{click:function(n){return t.goTo("/printRecord")}}},[e("span",[t._v("打印记录")])]),t._v(" "),e("li",{class:{in:t.isCurrent("/log")},on:{click:function(n){return t.goTo("/log")}}},[e("span",[t._v("日志信息")])]),t._v(" "),e("li",{staticClass:"move",class:{in:t.isCurrent("/hotDeploy")||t.isCurrent("/firmware")||t.isCurrent("/backups")||t.isCurrent("/deviceInfo")}},[t._v("更多\n        "),e("i",{staticClass:"el-icon-arrow-down"}),t._v(" "),e("ul",{staticClass:"hide-move"},[e("li",{style:t.isCurrent("/hotDeploy")?"color:#409EFF":"",on:{click:function(n){return t.goTo("/hotDeploy")}}},[e("span",[t._v("热部署")])]),t._v(" "),e("li",{style:t.isCurrent("/firmware")?"color:#409EFF":"",on:{click:function(n){return t.goTo("/firmware")}}},[e("span",[t._v("固件升级")])]),t._v(" "),e("li",{style:t.isCurrent("/backups")?"color:#409EFF":"",on:{click:function(n){return t.goTo("/backups")}}},[e("span",[t._v("数据备份")])]),t._v(" "),e("li",[e("span",{on:{click:t.updateIP}},[t._v("请求服务")])]),t._v(" "),e("li",{style:t.isCurrent("/deviceInfo")?"color:#409EFF":"",on:{click:function(n){return t.goTo("/deviceInfo")}}},[t._v("服务配置信息")]),t._v(" "),e("li",{style:t.isCurrent("/voiceInfo")?"color:#409EFF":"",on:{click:function(n){return t.goTo("/voiceInfo")}}},[t._v("引导配置信息")])])])])]),t._v(" "),t.isShowUpdatServer?e("UpdateServer",{attrs:{active:t.active,close:t.close}}):t._e()],1)},staticRenderFns:[]};var S=e("VU/8")(b,w,!1,function(t){e("X0Kw")},"data-v-c350af24",null).exports,y={name:"App",created:function(){var t=this;this.localHttp(),this.validatorHttp()?this.getWhiteList().then(function(){setTimeout(function(){t.jindutiao=!1},2e3)}).catch(function(n){t.jindutiao=!1,t.$notify.error({title:"错误",message:"请求服务设置，出错了",duration:0})}):this.isShowUpdatServer=!0},data:function(){return{isShowUpdatServer:!1,active:"ip",jindutiao:!0}},methods:u()({},Object(s.mapActions)(["getWhiteList"]),{validatorHttp:function(){var t=d.a.get("server");if(t){if("ip"==(t=JSON.parse(t)).type){var n=t.http.split(":"),e=Object(v.h)(n[0]),r=Object(v.j)(n[1]);if(e)return void this.$message.error(e);r&&this.$message.error(r)}else{var i=t.http,o=Object(v.k)(i);o&&this.$message.error(o)}return!0}return!1},localHttp:function(){var t=this,n={},e=location.protocol+"//"+location.hostname,r=void 0;""==location.port?(n.type="url",r=function(){return Object(p.a)(e+"/whitelist/getAll")}):(n.type="ip",r=function(){return Object(p.a)(e+":30003/whitelist/getAll")});var i=Date.now();r().then(function(r){try{var o=JSON.parse(d.a.get("isShowServer"));i>o+2592e5&&(d.a.set("isShowServer",Date.now()),t.$confirm("检测到当前服务可以能正常访问, 是否使用当前服务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"ip"==n.type?n.http=location.hostname+":30003":n.http=e,d.a.set("server",a()(n)),window.location.reload()}).catch(function(){t.isShowUpdatServer=!0}))}catch(r){console.log(147),d.a.set("isShowServer",Date.now()),t.$confirm("检测到当前服务可以能正常访问, 是否使用当前服务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"ip"==n.type?n.http=location.hostname+":30003":n.http=e,d.a.set("server",a()(n)),window.location.reload()}).catch(function(){t.isShowUpdatServer=!0})}}).catch(function(n){try{var e=JSON.parse(d.a.get("isShowUpdateServer"));i>e+2592e5&&(d.a.set("isShowUpdateServer",Date.now()),t.isShowUpdatServer=!0)}catch(n){t.isShowUpdatServer=!0}})}}),components:{UpdateServer:g,Header:S}},O={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[t.jindutiao?e("div",{staticClass:"jindutiao"}):t._e(),t._v(" "),e("Header"),t._v(" "),e("router-view"),t._v(" "),t.isShowUpdatServer?e("UpdateServer",{attrs:{active:t.active}}):t._e()],1)},staticRenderFns:[]};var _=e("VU/8")(y,O,!1,function(t){e("5stj")},null,null).exports,j=e("pRNm"),C=e.n(j);i.a.use(C.a);var P,I=new C.a({routes:[{path:"/",name:"whiteList",component:function(){return Promise.all([e.e(0),e.e(3)]).then(e.bind(null,"rPFt"))}},{path:"/deviceState",name:"deviceState",component:function(){return Promise.all([e.e(0),e.e(10)]).then(e.bind(null,"f55F"))}},{path:"/deviceInfo",name:"deviceInfo",component:function(){return e.e(5).then(e.bind(null,"qBw5"))}},{path:"/printRecord",name:"printRecord",component:function(){return Promise.all([e.e(0),e.e(11)]).then(e.bind(null,"5pMQ"))}},{path:"/log",name:"Log",component:function(){return e.e(1).then(e.bind(null,"/Hy7"))}},{path:"/firmware",name:"Firmware",component:function(){return Promise.all([e.e(0),e.e(4)]).then(e.bind(null,"v1lr"))}},{path:"/aquipmentConfig",name:"AquipmentConfig",component:function(){return e.e(9).then(e.bind(null,"LOst"))}},{path:"/backups",name:"backups",component:function(){return Promise.all([e.e(0),e.e(2)]).then(e.bind(null,"g5mp"))}},{path:"/hotDeploy",name:"hotDeploy",component:function(){return e.e(7).then(e.bind(null,"gEfu"))}},{path:"/help",name:"help",component:function(){return e.e(6).then(e.bind(null,"4l9g"))}},{path:"/voiceInfo",name:"voiceInfo",component:function(){return e.e(8).then(e.bind(null,"9nsT"))}}]}),k=e("bOdI"),T=e.n(k),x=(P={},T()(P,"get_whitelist",function(t,n){var e=n.whiteList;t.whiteList=e}),T()(P,"save_ip",function(t,n){var e=n.ip;t.ip=e}),P),F=e("Xxa5"),U=e.n(F),N=e("exGp"),$=e.n(N),D=e("gyMJ"),L={getWhiteList:function(t){var n=this,e=t.commit;return $()(U.a.mark(function t(){var r,i,o;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.i)();case 2:0==(r=t.sent).code&&(i=1,(o={}).ip=r.ip.map(function(t){return{id:i++,list:t,type:"ip"}}),o.number=r.number.map(function(t){return{id:i++,list:t.number,main:t.main,type:"number"}}),e("get_whitelist",{whiteList:o}));case 4:case"end":return t.stop()}},t,n)}))()},saveIp:function(t,n){(0,t.commit)("save_ip",{ip:n})}};i.a.use(l.a);var V=new l.a.Store({state:{whiteList:{},ip:""},mutations:x,actions:L,getters:{ip:function(t){try{var n=1;return t.whiteList.ip.map(function(t){return{id:n++,list:t,type:"ip"}})}catch(t){}},number:function(t){try{return t.whiteList.number.map(function(t){return{list:t,type:"number"}})}catch(t){}}}});i.a.filter("noSpace",function(t){}),i.a.config.productionTip=!1,new i.a({el:"#app",router:I,store:V,components:{App:_},template:"<App/>"})},OMN4:function(t,n){t.exports=axios},SJI6:function(t,n){t.exports=Vuex},X0Kw:function(t,n){},gyMJ:function(t,n,e){"use strict";e.d(n,"i",function(){return u}),e.d(n,"t",function(){return s}),e.d(n,"c",function(){return l}),e.d(n,"d",function(){return p}),e.d(n,"a",function(){return f}),e.d(n,"o",function(){return d}),e.d(n,"B",function(){return v}),e.d(n,"E",function(){return h}),e.d(n,"r",function(){return m}),e.d(n,"l",function(){return g}),e.d(n,"s",function(){return b}),e.d(n,"D",function(){return w}),e.d(n,"u",function(){return S}),e.d(n,"x",function(){return y}),e.d(n,"q",function(){return O}),e.d(n,"m",function(){return _}),e.d(n,"n",function(){return j}),e.d(n,"C",function(){return C}),e.d(n,"I",function(){return P}),e.d(n,"p",function(){return I}),e.d(n,"b",function(){return k}),e.d(n,"e",function(){return T}),e.d(n,"A",function(){return x}),e.d(n,"z",function(){return F}),e.d(n,"y",function(){return U}),e.d(n,"h",function(){return N}),e.d(n,"v",function(){return $}),e.d(n,"g",function(){return D}),e.d(n,"w",function(){return L}),e.d(n,"H",function(){return V}),e.d(n,"k",function(){return E}),e.d(n,"f",function(){return R}),e.d(n,"F",function(){return H}),e.d(n,"j",function(){return J}),e.d(n,"G",function(){return A});var r=e("yPgl"),i=e("/DPI"),o=e.n(i),a=void 0;try{var c=JSON.parse(o.a.get("server"));a="ip"==c.type?"http://"+c.http:""+c.http}catch(t){}var u=function(){return Object(r.a)(a+"/whitelist/getAll")},s=function(t){return Object(r.a)(a+"/whitelist/search",t,"POST")},l=function(t){return Object(r.a)(a+"/whitelist/del",t,"POST")},p=function(t){return Object(r.a)(a+"/whitelist/batchdel",t,"POST")},f=function(t){return Object(r.a)(a+"/whitelist/put",t,"POST")},d=function(){return Object(r.a)(a+"/config/getconfig")},v=function(){return Object(r.a)(a+"/config/restoreconfig")},h=function(t){return Object(r.a)(a+"/config/updateconfig",t,"POST")},m=function(t){return Object(r.a)(a+"/device/normalonline",{statetype:t})},g=function(){return Object(r.a)(a+"/printlog/getallcount")},b=function(t){return Object(r.a)(a+"/printlog/getnumcount",{number:t})},w=function(t){return Object(r.a)(a+"/printlog/periodcount",t)},S=function(){return Object(r.a)(a+"/printlog/getfilelevel")},y=function(t){return Object(r.a)(a+"/printlog/getlog",{filename:t})},O=function(){return Object(r.a)(a+"/device/normalonline",{updateversion:!0,statetype:"正常"})},_=function(){return Object(r.a)(a+"/device/onlinenum")},j=function(t){return Object(r.a)(a+"/device/readConfig",{number:t})},C=function(t){return Object(r.a)(a+"/device/updateConfig",t,"POST")},P=function(t){return Object(r.a)(a+"/firmware/updatefirmware",t,"POST")},I=function(){return Object(r.a)(a+"/mongodata/getfilelevel")},k=function(){return Object(r.a)(a+"/mongodata/backup")},T=function(t){return Object(r.a)(a+"/mongodata/delbackdata",{deldataname:t})},x=function(t){return Object(r.a)(a+"/mongodata/recovery",{recoveryname:t})},F=function(t){return a+"/printlog/getlogzip?fileName="+t.fileName+"&saveName="+t.saveName},U=function(t,n){return Object(r.a)(a+"/mongodata/importdata?collection="+t,n,"POST","form")},N=function(t){return a+"/mongodata/exportdata?collection="+t.collection+"&saveName="+t.saveName},$=function(){return Object(r.a)(a+"/config/getVersion")},D=function(t){return Object(r.a)(a+"/config/deploy",t,"POST","form")},L=function(){return Object(r.a)(a+"/config/getglobalConf")},V=function(t){return Object(r.a)(a+"/config/updGlobalConf",t,"POST")},E=function(){return Object(r.a)(a+"/devconfig/getall")},R=function(t){return Object(r.a)(a+"/devconfig/remove",t,"POST")},H=function(t){return Object(r.a)(a+"/devconfig/batchupdate",t,"POST")},J=function(){return Object(r.a)(a+"/voice/getallseg","GET")},A=function(t){return Object(r.a)(a+"/voice/updateseg",t,"POST")}},lRwf:function(t,n){t.exports=Vue},pRNm:function(t,n){t.exports=VueRouter},vPHJ:function(t,n,e){"use strict";e.d(n,"h",function(){return p}),e.d(n,"j",function(){return f}),e.d(n,"k",function(){return d}),e.d(n,"i",function(){return v}),e.d(n,"b",function(){return m}),e.d(n,"a",function(){return g}),e.d(n,"e",function(){return b}),e.d(n,"c",function(){return w}),e.d(n,"d",function(){return S}),e.d(n,"f",function(){return O}),e.d(n,"g",function(){return _});var r=e("BO1k"),i=e.n(r),o=e("//Fk"),a=e.n(o),c=e("/DPI"),u=e.n(c),s=e("lRwf"),l=(e.n(s),this),p=function(t){return h.isIP(t)},f=function(t){return h.isPort(t)},d=function(t){return h.isUrl(t)},v=function(t){return/^(?=.*[A-Z])(?=.*\d)[A-Z\d]{16}$/.test(t)},h={isValue:function(t){if(!t)return{type:!1,msg:"请输入"}},isIP:function(t){return t?/(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}/g.test(t)?void 0:"IP格式错误":"请输入IP"},isPort:function(t){return t?/^\d+$/.test(t)?void 0:"端口号格式错误":"请输入端口号"},isUrl:function(t){return t?/^((https?|ftp|file|http):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(t)?void 0:"URL格式错误":"请输入URL"},checkPort:function(t){return""==t?"不能为空":/^[0-9]+.?[0-9]*/.test(t)?t>65535?"不能大于65535":void 0:"请输入数字"}},m=function(t){return new a.a(function(n,e){n(t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8))})},g=function(t){var n=t.toString();return(n=n.replace(/\[INFO\]/g,"[INFO]<br/>")).replace(/\n/g,"<br/><br/>")},b=function(t,n){var e="";""!=t?n(e,t.slice(0,1e4)):n(e="data不能为空",t)},w=function(){try{var t=JSON.parse(u.a.get("server"));return"ip"==t.type?t.http:t.http.replace(/http:\/\/|https:\/\//,"")}catch(t){l.$message.error("请求服务地址出错了")}},S=function(t){for(var n in t)""!=t[n]&&"string"==typeof t[n]&&(t[n]=y(t[n]));return t};function y(t){var n=t.split(""),e=[],r=!0,o=!1,a=void 0;try{for(var c,u=i()(n);!(r=(c=u.next()).done);r=!0){var s=c.value;0!=s.charCodeAt(0)&&e.push(s)}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return e.join("")}var O=function(t){return"异常日志"===t?"error.log":"打印日志"===t?"info.log":"警告日志"===t?"warn.log":t},_=function(t){return/[.]$/.test(t)?t.substr(0,t.length-1):t}},vz4p:function(t,n){t.exports=XLSX},yPgl:function(t,n,e){"use strict";n.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments[3];return new a.a(function(o,a){var c=void 0;if("GET"===e){var s="";i()(n).forEach(function(t){s+=t+"="+n[t]+"&"}),""!==s&&(s=s.substring(0,s.lastIndexOf("&")),t=t+"?"+s),c=u.a.get(t)}else c=r?u()({method:"post",url:t,headers:{"Content-Type":"multipart/form-data;charset=UTF-8"},data:n}):u.a.post(t,n);c.then(function(t){var n=t.data;0==n.code?o(n):a(n)}).catch(function(t){a(t.response)})})};var r=e("fZjL"),i=e.n(r),o=e("//Fk"),a=e.n(o),c=e("OMN4"),u=e.n(c)}},["NHnr"]);