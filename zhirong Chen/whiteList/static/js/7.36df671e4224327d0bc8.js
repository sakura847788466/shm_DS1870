webpackJsonp([7],{H6x7:function(t,e){},gEfu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("gyMJ"),i={name:"HotDeploy",mounted:function(){var t=this;Object(s.v)().then(function(e){t.version=e.data}).catch(function(t){console.log(t)})},data:function(){return{hotDeployName:"",version:"",loading:!1}},methods:{getMyVersion:function(){var t=this;this.loading=!0;var e=Date.now()+3e3;Object(s.v)().then(function(n){Date.now()>e?(t.loading=!1,t.version=n.data,t.$message({type:"success",message:"获取版本号成功",duration:3e3,showClose:!0})):setTimeout(function(){t.loading=!1,t.version=n.data,t.$message({type:"success",message:"获取版本号成功",duration:3e3,showClose:!0})},1500)}).catch(function(e){t.loading=!1,t.$message({type:"error",message:"获取版本号失败",duration:3e3,showClose:!0})})},request:function(t){var e=t.target.files[0];/\.jar$/.test(e.name)?this.hotDeployName=e.name:this.$message({type:"error",message:"文件类型有误",duration:3e3,showClose:!0})},mySubmit:function(){var t=this;if(""!=this.hotDeployName){var e=new FormData,n=document.getElementById("hotDeployData").files[0];e.append("file",n),this.$confirm("此操作将执行热部署, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=t.$loading({lock:!0,text:"正在部署中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s.g)(e).then(function(e){setTimeout(function(){t.myGetVersion(n)},3e3)}).catch(function(e){n.close(),t.$message({type:"error",message:e.data,duration:3e3,showClose:!0})})})}else this.$message({type:"error",message:"请上传导入文件",duration:3e3,showClose:!0})},myGetVersion:function(t){var e=this;Object(s.v)().then(function(n){t.close(),e.version=n.data,e.$message({type:"success",message:"部署成功",duration:3e3,showClose:!0})}).catch(function(n){e.myGetVersion(t)})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("div",{staticClass:"box"},[t._m(0),t._v(" "),n("div",{staticClass:"body"},[n("div",{staticStyle:{height:"290px","border-bottom":"1px solid #e7e7e7"}},[n("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"18px"}},[n("p",{staticStyle:{"margin-right":"24px"}},[t._v("当前版本号："),n("span",{staticStyle:{color:"#666","font-size":"14px"}},[t._v(t._s(t.version||"..."))])]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.getMyVersion()}}},[t._v("刷新版本")])],1),t._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("p",{staticStyle:{"font-size":"18px"}},[t._v("请选择导入文件："),n("span",{staticStyle:{color:"red","font-size":"14px"}},[t._v(t._s(t.hotDeployName))])]),t._v(" "),n("input",{staticStyle:{display:"none"},attrs:{id:"hotDeployData",type:"file",accept:".jar"},on:{change:function(e){return t.request(e)}}}),t._v(" "),n("label",{staticClass:"btn",attrs:{for:"hotDeployData",title:"请导入.zip文件"}},[t._v("\n            文件导入\n          ")])])]),t._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.mySubmit()}}},[t._v("立即部署")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticClass:"title_nav"},[this._v("\n        热部署\n      ")])])}]};var o=n("VU/8")(i,a,!1,function(t){n("H6x7")},"data-v-970967be",null);e.default=o.exports}});